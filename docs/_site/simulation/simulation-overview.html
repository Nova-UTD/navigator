<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/navigator/assets/css/just-the-docs-default.css"> <script src="/navigator/assets/js/vendor/lunr.min.js"></script> <script src="/navigator/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Simulation | Navigator</title> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="Simulation" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Navigator is an open-source autonomous driving system developed by Nova, an applied research group at UT Dallas." /> <meta property="og:description" content="Navigator is an open-source autonomous driving system developed by Nova, an applied research group at UT Dallas." /> <link rel="canonical" href="http://0.0.0.0:8083/navigator/simulation/simulation-overview.html" /> <meta property="og:url" content="http://0.0.0.0:8083/navigator/simulation/simulation-overview.html" /> <meta property="og:site_name" content="Navigator" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Simulation" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Navigator is an open-source autonomous driving system developed by Nova, an applied research group at UT Dallas.","headline":"Simulation","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:8083/navigator/assets/res/logo.png"}},"url":"http://0.0.0.0:8083/navigator/simulation/simulation-overview.html"}</script> <!-- End Jekyll SEO tag --> <link rel="shortcut icon" type="image/png" href="/navigator/assets/res/favicon.png"> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/navigator/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/navigator/system-overview.html" class="nav-list-link">System overview</a></li><li class="nav-list-item"><a href="/navigator/sensing/sensing-overview.html" class="nav-list-link">Sensing</a></li><li class="nav-list-item"><a href="/navigator/perception/segmentation.html" class="nav-list-link">Semantic segmentation</a></li><li class="nav-list-item"><a href="/navigator/perception/mapping.html" class="nav-list-link">Localization and Mapping</a></li><li class="nav-list-item"><a href="/navigator/perception/perception-overview.html" class="nav-list-link">Perception</a></li><li class="nav-list-item"><a href="/navigator/contributing/tricks.html" class="nav-list-link">Tricks</a></li><li class="nav-list-item"><a href="/navigator/controls/controls-overview.html" class="nav-list-link">Controls</a></li><li class="nav-list-item"><a href="/navigator/contributing/contributing-overview.html" class="nav-list-link">Contributing</a></li><li class="nav-list-item active"><a href="/navigator/simulation/simulation-overview.html" class="nav-list-link active">Simulation</a></li><li class="nav-list-item"><a href="/navigator/contributing/troubleshooting.html" class="nav-list-link">Troubleshooting</a></li><li class="nav-list-item"><a href="/navigator/interface/schematics.html" class="nav-list-link">Schematics</a></li><li class="nav-list-item"><a href="/navigator/interface/interface-overview.html" class="nav-list-link">Interface</a></li><li class="nav-list-item"><a href="/navigator/planning/airbags.html" class="nav-list-link">Airbags</a></li><li class="nav-list-item"><a href="/navigator/planning/design.html" class="nav-list-link">Behavior Planning and Controls Design Document (draft)</a></li><li class="nav-list-item"><a href="/navigator/planning/maps.html" class="nav-list-link">Maps</a></li><li class="nav-list-item"><a href="/navigator/opendrivepy.html" class="nav-list-link">OpenDrivePy</a></li><li class="nav-list-item"><a href="/navigator/perception/perception_new.html" class="nav-list-link">Perception and Prediction Design Document (draft)</a></li><li class="nav-list-item"><a href="/navigator/planning/planning-overview.html" class="nav-list-link">Planning</a></li><li class="nav-list-item"><a href="/navigator/writing-documentation.html" class="nav-list-link">Writing documentation</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://nova-utd.github.io" class="nav-list-link external"> Learn about Nova <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Navigator" aria-label="Search Navigator" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//nova-utd.github.io" class="site-button" > Learn about Nova </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="simulation-overview"> <a href="#simulation-overview" class="anchor-heading" aria-labelledby="simulation-overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Simulation overview </h1> <p><em>Maintained by Connor Scally &amp; Daniel Vayman</em></p> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#simulation-enviroment" id="markdown-toc-simulation-enviroment">Simulation Enviroment</a></li> <li><a href="#launching-the-simulator--running-navigator" id="markdown-toc-launching-the-simulator--running-navigator">Launching the simulator &amp; running Navigator:</a></li> <li><a href="#using-the-simulator" id="markdown-toc-using-the-simulator">Using the Simulator:</a></li> <li><a href="#troubleshooting" id="markdown-toc-troubleshooting">Troubleshooting:</a></li> <li><a href="#sourcing-foxy-automatically-in-bash" id="markdown-toc-sourcing-foxy-automatically-in-bash">Sourcing Foxy Automatically in Bash:</a></li> </ol><hr /> <p>Before demonstrating our codebase on the vehicle, in the real world, we must first test our stack in a virtual one. The following documentation outlines essential CARLA usage and syntax, to allow for simulating our stack in a virtual enviroment.</p> <p>Nova utilizes CARLA for virtualization. For further information on CARLA, and to learn more about advanced usage, please see the following links:</p> <ul> <li>https://carla.org/</li> <li>https://carla.readthedocs.io/en/latest/</li> </ul> <h2 id="simulation-enviroment"> <a href="#simulation-enviroment" class="anchor-heading" aria-labelledby="simulation-enviroment"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Simulation Enviroment </h2> <ul> <li> <p>Prerequisites:</p> <ol> <li>CARLA Simulator: Please follow the instructions in the above links to install CARLA on your chosen operating system</li> <li>Navigator: Please see our GitHub page for the latest releases of Navigator</li> <li><a href="http://wiki.ros.org/rviz">RVIZ</a> (Or an equivalent ROS visualizer)</li> <li><a href="https://docs.ros.org/en/foxy/index.html">ROS2</a></li> <li>Dependencies for the above: Self-explanatory, Navigator comes with most of what you need, CARLA may not, do not forget to check!</li> </ol> </li> </ul> <h2 id="launching-the-simulator--running-navigator"> <a href="#launching-the-simulator--running-navigator" class="anchor-heading" aria-labelledby="launching-the-simulator--running-navigator"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Launching the simulator &amp; running Navigator: </h2> <ul> <li> <p>Launching <strong>CARLA</strong>:</p> <ol> <li>Your first step should be to navigate to your CARLA directory and launch CARLA with the CARLAUE4.sh script with the -RenderOffScreen flag. If you are on a unix system, the command will look like this:</li> </ol> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ /home/share/carla/CarlaUE4.sh -RenderOffscreen
</code></pre></div> </div> </li> <li> <p>The “RenderOffscreen” flag hides the rendering window, which saves some resources. See <a href="https://carla.readthedocs.io/en/latest/start_quickstart/#command-line-options">here</a> for more details</p> </li> <li> <p>Launching <strong>RVIZ</strong> (<em>within our Docker container</em>):</p> <ol> <li> <p>Open a new terminal window.</p> </li> <li> <p>Navigate to the root directory of Navigator</p> </li> <li> <p>Enable Docker to launch GUI programs</p> <p><code class="language-plaintext highlighter-rouge">$ xhost +</code></p> </li> <li> <p>Run our docker container start script. (If first time running container, refer to <a href="/navigator/index">step 3</a>)</p> <p><code class="language-plaintext highlighter-rouge">$ ./start.sh </code></p> </li> <li> <p>Source the setup script via a command like: <code class="language-plaintext highlighter-rouge">. install/setup.bash</code></p> </li> <li>Run: <code class="language-plaintext highlighter-rouge">rviz2</code></li> <li>Select File followed by Open Config Select default.rviz from the share folder. It is recommended that you have your own copy of this as well for your own configuration.</li> </ol> </li> <li> <p>Launching <strong>Navigator</strong>:</p> <ol> <li> <p>Open a new terminal window.</p> </li> <li> <p>Navigate to the root directory of Navigator.</p> </li> <li> <p>Run the docker container <code class="language-plaintext highlighter-rouge">./start.sh</code></p> </li> <li> <p>Run <code class="language-plaintext highlighter-rouge">source /install/setup.bash</code> (if you have bash sourcing ROS automatically (see below), that works too)</p> </li> <li> <p>Run <code class="language-plaintext highlighter-rouge">ros2 launch carla_interface carla-lite.launch.py</code></p> </li> <li> <p>Check RVIZ and terminal output. The sim_bridge will publish sensor data just as if you were driving on campus, and it will similary accept commands from our <a href="https://github.com/Nova-UTD/navigator/wiki/Topic-and-transform-structure">standard topics</a>. As of writing, our custom bridge publishes:</p> </li> </ol> <ul> <li>GNSS (GPS)</li> <li>IMU</li> <li>Front and rear Lidar (not fully functional)</li> <li>Front RGB camera</li> <li>Front depth camera</li> <li>CARLA ground truths for</li> <li>Car’s odometry (position, orientation, speed)</li> <li>CARLA virtual bird’s-eye camera (/carla/birds_eye_rgb)</li> </ul> <p><em>The most up-to-date information on our bridge’s capabilities</em> can be found <a href="https://github.com/Nova-UTD/navigator /blob/dev/src/interface/sim_bridge/sim_bridge/sim_bridge_node.py#L3">at the top of the script itself</a>.</p> </li> </ul> <h2 id="using-the-simulator"> <a href="#using-the-simulator" class="anchor-heading" aria-labelledby="using-the-simulator"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the Simulator: </h2> <ul> <li>You can control our ego vehicle with <code class="language-plaintext highlighter-rouge">ros2 run manual_control manual_control_node</code> <ul> <li>At the moment, this only supports keyboard control through NoMachine or similar, <strong><em>not SSH</em></strong>.</li> <li>If you get a “pynput” error, try running <code class="language-plaintext highlighter-rouge">pip3 install pynput</code>.</li> </ul> </li> <li>You can change a number of simulation settings by editing our script’s contants (<a href="https://github.com/Nova-UTD/navigator/blob/fd05a57a46f286961956ea35986c0107a786acdf/src/interface/sim_bridge/sim_bridge/sim_bridge_node.py#L27">here</a>). <ul> <li>Don’t forget to rebuild the package or use <code class="language-plaintext highlighter-rouge">colcon build --symlink-install</code> (recommended).</li> <li>ROS param support in the works.</li> </ul> </li> </ul> <h2 id="troubleshooting"> <a href="#troubleshooting" class="anchor-heading" aria-labelledby="troubleshooting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Troubleshooting: </h2> <ul> <li>If you get a “pynput” error, try running <code class="language-plaintext highlighter-rouge">pip3 install pynput</code>.</li> <li>If you get a CARLA segmentation fault, it’s likely you just need to restart CARLA. This will be fixed… eventually. This should only happen after starting the bridge 10 times or so, and should not happen while the bridge is running.</li> <li>If CARLA gives you a SIGFAULT error attach the -carla-rpc-port=N where N = your favorite (Not in use) port number.</li> </ul> <h2 id="sourcing-foxy-automatically-in-bash"> <a href="#sourcing-foxy-automatically-in-bash" class="anchor-heading" aria-labelledby="sourcing-foxy-automatically-in-bash"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Sourcing Foxy Automatically in Bash: </h2> <ol> <li>Open your terminal</li> <li>Write the command –&gt; <code class="language-plaintext highlighter-rouge">gedit ~/.bashrc</code> (or nano, whatever really)</li> <li>Go under the last line line and write –&gt; <code class="language-plaintext highlighter-rouge">source /opt/ros/foxy/setup.bash</code></li> <li>Save and exit</li> <li>Now with every new shell you open, it will source automatically</li> </ol> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
