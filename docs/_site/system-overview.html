<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/navigator/assets/css/just-the-docs-default.css"> <script src="/navigator/assets/js/vendor/lunr.min.js"></script> <script src="/navigator/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>System overview | Navigator</title> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="System overview" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Navigator is an open-source autonomous driving system developed by Nova, an applied research group at UT Dallas." /> <meta property="og:description" content="Navigator is an open-source autonomous driving system developed by Nova, an applied research group at UT Dallas." /> <link rel="canonical" href="http://0.0.0.0:8083/navigator/system-overview.html" /> <meta property="og:url" content="http://0.0.0.0:8083/navigator/system-overview.html" /> <meta property="og:site_name" content="Navigator" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="System overview" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Navigator is an open-source autonomous driving system developed by Nova, an applied research group at UT Dallas.","headline":"System overview","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:8083/navigator/assets/res/logo.png"}},"url":"http://0.0.0.0:8083/navigator/system-overview.html"}</script> <!-- End Jekyll SEO tag --> <link rel="shortcut icon" type="image/png" href="/navigator/assets/res/favicon.png"> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/navigator/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="/navigator/system-overview.html" class="nav-list-link active">System overview</a></li><li class="nav-list-item"><a href="/navigator/sensing/sensing-overview.html" class="nav-list-link">Sensing</a></li><li class="nav-list-item"><a href="/navigator/perception/segmentation.html" class="nav-list-link">Semantic segmentation</a></li><li class="nav-list-item"><a href="/navigator/perception/mapping.html" class="nav-list-link">Localization and Mapping</a></li><li class="nav-list-item"><a href="/navigator/perception/perception-overview.html" class="nav-list-link">Perception</a></li><li class="nav-list-item"><a href="/navigator/contributing/tricks.html" class="nav-list-link">Tricks</a></li><li class="nav-list-item"><a href="/navigator/controls/controls-overview.html" class="nav-list-link">Controls</a></li><li class="nav-list-item"><a href="/navigator/contributing/contributing-overview.html" class="nav-list-link">Contributing</a></li><li class="nav-list-item"><a href="/navigator/simulation/simulation-overview.html" class="nav-list-link">Simulation</a></li><li class="nav-list-item"><a href="/navigator/contributing/troubleshooting.html" class="nav-list-link">Troubleshooting</a></li><li class="nav-list-item"><a href="/navigator/interface/schematics.html" class="nav-list-link">Schematics</a></li><li class="nav-list-item"><a href="/navigator/interface/interface-overview.html" class="nav-list-link">Interface</a></li><li class="nav-list-item"><a href="/navigator/planning/airbags.html" class="nav-list-link">Airbags</a></li><li class="nav-list-item"><a href="/navigator/planning/design.html" class="nav-list-link">Behavior Planning and Controls Design Document (draft)</a></li><li class="nav-list-item"><a href="/navigator/planning/maps.html" class="nav-list-link">Maps</a></li><li class="nav-list-item"><a href="/navigator/opendrivepy.html" class="nav-list-link">OpenDrivePy</a></li><li class="nav-list-item"><a href="/navigator/perception/perception_new.html" class="nav-list-link">Perception and Prediction Design Document (draft)</a></li><li class="nav-list-item"><a href="/navigator/planning/planning-overview.html" class="nav-list-link">Planning</a></li><li class="nav-list-item"><a href="/navigator/writing-documentation.html" class="nav-list-link">Writing documentation</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://nova-utd.github.io" class="nav-list-link external"> Learn about Nova <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Navigator" aria-label="Search Navigator" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//nova-utd.github.io" class="site-button" > Learn about Nova </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="system-overview"> <a href="#system-overview" class="anchor-heading" aria-labelledby="system-overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> System overview </h1> <p><em>Maintained by Will Heitman</em></p> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#design" id="markdown-toc-design">Design</a> <ol> <li><a href="#about-nodes-and-topics" id="markdown-toc-about-nodes-and-topics">About nodes and topics</a></li> </ol> </li> <li><a href="#subsystems" id="markdown-toc-subsystems">Subsystems</a></li> <li><a href="#cost-maps" id="markdown-toc-cost-maps">Cost maps</a></li> <li><a href="#topics" id="markdown-toc-topics">Topics</a></li> </ol><hr /> <h2 id="design"> <a href="#design" class="anchor-heading" aria-labelledby="design"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Design </h2> <p>Navigator is designed to be:</p> <ul> <li><strong>Simple</strong>, with components that are easy to use an extend <ul> <li>When a more powerful but complex algorithm is used, a simpler alternative should also be present</li> </ul> </li> <li><strong>Modular</strong>, with nodes that can be swapped, added, and updated with the help of ROS2 <ul> <li>Since nodes are all built using standard C++ and Python libraries, code is future-proofed.</li> </ul> </li> <li><strong>Open source</strong>, with all of our code licensed under the highly permissable MIT license <ul> <li>Our dependencies are also open-source</li> </ul> </li> </ul> <h3 id="about-nodes-and-topics"> <a href="#about-nodes-and-topics" class="anchor-heading" aria-labelledby="about-nodes-and-topics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> About nodes and topics </h3> <p>Navigator is built upon ROS2, a communications framework where individual executables called “nodes” exchange messages throguh “topics.” A node can either subscribe to a topic or publish to it. In this fashion, individual nodes form a dense network where everything from camera streams to steering commands are passed from one node to the next.</p> <p>Nodes can be grouped into packages. Packages are then grouped in workspaces. Navigator itself is a ROS workspace. It contains many packages, and each package contains at least one node.</p> <p class="example">Using ROS2, one node can gather raw LiDAR data from a sensor, where it publishes the pointcloud as a <code class="language-plaintext highlighter-rouge">PointCloud2</code> message to a topic called <code class="language-plaintext highlighter-rouge">/lidar/raw</code>. Another node can then subscribe to <code class="language-plaintext highlighter-rouge">/lidar/raw</code>, filter the data, and publish the result to <code class="language-plaintext highlighter-rouge">/lidar/filtered</code>.</p> <p>To learn more about ROS, watch <a href="https://www.youtube.com/watch?v=FTA4Ia2vLS8">this lecture by Katherine Scott</a>, a developer advocate at Open Robotics. &lt;!– ## Subsystems <img src="/navigator/assets/res/v1_2_structure.drawio.png" alt="Navigator's general structure" /></p> <p>Navigator is split into five main subsystems:</p> <ul> <li><a href="/navigator/sensing/sensing-overview"><strong>Sensing</strong></a>, where raw sensor data from cameras, GNSS, and more is filtered before being passed along</li> <li><a href="/navigator/planning/planning-overview"><strong>Perception</strong></a>, which uses the filtered sensor data to build a rich understanding of the car’s surroundings</li> <li><a href="/navigator/planning/planning-overview"><strong>Planning</strong></a>, which uses this rich understanding, plus the desired destination, to decide how the car should act on a high level</li> <li><a href="/navigator/controls/controls-overview"><strong>Controls</strong></a>, where the desired action is compared to the car’s current state and low-level action is calculated</li> <li><a href="/navigator/interface/interface-overview"><strong>Interface</strong></a>, where the low-level action is sent to the steering wheel and pedals. –&gt;</li> </ul> <!-- We also have some important code to support testing, visualization, and simulation. Simulation plays a big role in our development, and you can find an overview of it [here](/navigator/simulation/simulation-overview). --> <!-- #### Example Our **sensing** system takes in a red blob from our front camera and does some white balancing to make the image more clear. The **perception** system identifies this red blob as a stop sign and generates a bounding box with the coordinates of the stop sign relative to the car. The **planning** system determines that we must set our speed to zero at the stop sign. The **controls** system notes that our car is still moving, and calculates that we must decelerate a certain amount. Finally, our **actuation** system converts this desired deceleration into a brake pedal command, which is sent out to the pedal's motor. --> <h2 id="subsystems"> <a href="#subsystems" class="anchor-heading" aria-labelledby="subsystems"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Subsystems </h2> <p>We can divide Navigator’s nodes into four groups.</p> <p>The <strong>sensing</strong> subsystem takes raw sensor data and publishes them as <a href="https://docs.ros.org/en/indigo/api/sensor_msgs/html/msg/Image.html"><code class="language-plaintext highlighter-rouge">Image</code></a> messages, <a href="https://docs.ros.org/en/indigo/api/sensor_msgs/html/msg/PointCloud2.html"><code class="language-plaintext highlighter-rouge">PointCloud2</code></a> messages, <a href="https://docs.ros.org/en/indigo/api/sensor_msgs/html/msg/Imu.html"><code class="language-plaintext highlighter-rouge">Imu</code></a> messages, and so on. This subsystem also include sensor filters, which subscribe to raw data and publish their filtered results.</p> <p>The <strong>perception</strong> subsystem draws inferences from the sensor data, including the location of pedestrians, our position on the map, and the predicted motion of surrounding vehicles. Nodes in this subsystem often publish their results as <a href="#cost-maps"><strong>cost maps</strong></a>.</p> <p>The <strong>planning</strong> subsystem takes our perception results and decides what our vehicle should do. This subsystem handles both high-level decisions (Should we pass a car that’s stopped in the road?) and low-level ones (How far should we press the throttle pedal to reach our desired speed?).</p> <p>The <strong>interface</strong> subsystem is the link between our software and hardware. It includes nodes that communicate with our steering hardware, our microcontroller, and more. Both the sensing and interface subsystems are <strong>vehicle-specific</strong>, which means that they need to be configured to suite each individual vehicle. At Nova, we have separate configurations for simulated driving and real-world use.</p> <h2 id="cost-maps"> <a href="#cost-maps" class="anchor-heading" aria-labelledby="cost-maps"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cost maps </h2> <p>During execution, Navigator calculates several cost maps, which are grid-based maps of our surrounding area that describe where our car should or should not drive.</p> <p>Each cell in the grid is assigned a cost. The higher the cost, the less likely our car will generate a path that moves through the cell. This results in paths that weave their way through only low-cost cells. If no low-cost cells are available, the car stops and waits.</p> <p>We calculate and use multiple cost maps, each one representing a unique factor to consider. For example:</p> <ul> <li>Our occupancy grid generator describes the location of objects (cars, people, curbs).</li> <li>Our prediction network (PredNet) node describes the <em>future</em> location of obstacles.</li> <li>Our red light detector marks intersections as high-cost regions if the light is red.</li> <li>Our map manager assigns costs based on how far a cell is from the route and from the goal.</li> </ul> <p>We add as many of these layers together to form a single, holisitic costmap that our motion planner uses as its input.</p> <p><img src="/navigator/assets/res/cost_map_size.jpg" alt="Cost map dimensions" /></p> <p><small>Above: Cost map dimensions</small></p> <p>Cost maps should be in the <code class="language-plaintext highlighter-rouge">base_link</code> (vehicle) reference frame. They should extend 40 meters in front and to the side of the car and 20 meters behind, forming a total area of 80 x 60 meters. Cells should have a side length of either 0.2, 0.4, 0.8, or 1.6 meters.</p> <p><img src="/navigator/assets/res/cost_maps.png" alt="Examples of cost maps" /></p> <p>In the above example, each image is 200 x 150 pixels, representing a cost map layer with a resolution of 0.4 meters/cell. Clockwise from top left: Current occupancy, junction cost (due to a stop sign), route distance, and drivable area.</p> <h2 id="topics"> <a href="#topics" class="anchor-heading" aria-labelledby="topics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Topics </h2> <ul> <li><code class="language-plaintext highlighter-rouge">/lidar/fused</code>: Raw LiDAR fused together to create a 360-degree picture. Otherwise unfiltered.</li> <li><code class="language-plaintext highlighter-rouge">/lidar/filtered</code>: Filtered LiDAR, with ground points removed.</li> <li><code class="language-plaintext highlighter-rouge">/grid/drivable</code></li> <li><code class="language-plaintext highlighter-rouge">/grid/route_distance</code></li> <li><code class="language-plaintext highlighter-rouge">/grid/occupancy/current</code>: Only the current occupancy grid.</li> <li><code class="language-plaintext highlighter-rouge">/grid/occupancy/combined</code>: Both the current and all future prediction occupancy grids, summed together.</li> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
